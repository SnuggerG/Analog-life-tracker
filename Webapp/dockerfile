## Use an official Python runtime as a parent image
FROM python:3.10-slim

## Set environment variables
ENV PYTHONDONTWRITEBYTECODE=1
ENV PYTHONUNBUFFERED=1

## Set work directory
WORKDIR /app

## Install dependencies
# Copy only requirements if you have one, otherwise install directly
# Uncomment below if you add a requirements.txt
# COPY requirements.txt ./
# RUN pip install --no-cache-dir -r requirements.txt

## Install Flask and Gunicorn
RUN pip install --no-cache-dir Flask gunicorn

## Copy project
COPY . /app

## Expose port 8000
EXPOSE 8000

## Run the app using Gunicorn
# Assumes app instance is called "app" in app.py
CMD ["gunicorn", "--bind", "0.0.0.0:8000", "app:app"]
